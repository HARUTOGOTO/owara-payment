<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>決済ページ</title>
  <script src="https://widget.univapay.com/client/checkout.js"></script>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head><body style="display:flex;justify-content:center;align-items:center;height:100vh">

<button id="payBtn" style="font-size:1.2rem;padding:1em 2em">便利メニュー ¥100</button>

<script>
(async () => {
  // ① LIFF 初期化
  await liff.init({ liffId: "YOUR_LIFF_ID" });        // ← 差し替え
  const profile   = await liff.getProfile();
  const userId    = profile.userId;                  // ← LINE USER ID

  // ② ウィジェット生成
  const checkout = UnivapayCheckout.create({
    appId: "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhcHBfdG9rZW4iLCJpYXQiOjE3NDg0OTQyMTEsIm1lcmNoYW50X2lkIjoiMTFmMDJlMTgtYzE1Ny0zOTk4LTk4NzgtY2I4N2ZlMzc3NjY4Iiwic3RvcmVfaWQiOiIxMWYwMmUxOC1lZjQ3LTQ5MWEtYWVjNy1iNzI4ZGQxNTM1NGMiLCJkb21haW5zIjpbImhhcnV0b2dvdG8uZ2l0aHViLmlvIl0sIm1vZGUiOiJ0ZXN0IiwiY3JlYXRvcl9pZCI6IjExZjAyZTE4LWMxNTctMzk5OC05ODc4LWNiODdmZTM3NzY2OCIsInZlcnNpb24iOjEsImp0aSI6IjExZjAzYzQ4LTY3NTktYjdhYi1hZjgwLWU3ZjdmZDU2ODQ1ZiJ9.virRF7QMEaez9Rof_vRcrGpb2CBtTDCD0vnlWpyGc_U",                       // ← ドメイン入り JWT
    checkout: "payment",
    amount: 100,
    currency: "JPY",
    title: "おわら風の盆｜決済",
    header:"おわら風の盆｜決済",
    description:"便利メニュー解放 ¥100",
    autoClose:true,
    metadata:{ line_user_id: userId }                // ★ 重要
  });

  document.getElementById('payBtn').onclick = () => checkout.open();
})();
</script></body></html>
